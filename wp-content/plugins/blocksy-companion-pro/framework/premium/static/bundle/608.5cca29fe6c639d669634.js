"use strict";(globalThis.webpackChunkblocksy_companion=globalThis.webpackChunkblocksy_companion||[]).push([[407,608],{407:function(e,t,n){n.d(t,{u:function(){return u},O:function(){return a}});var r=n(705);const o=["isExpired"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=function(){const e=JSON.parse(localStorage.getItem("blocksyPastPopups"));let t={};return Array.isArray(e)?e.forEach(function(e){t[e]={closed:{reason:"cancel",timestamp:(new Date).getTime()},pages:[]}}):t=e,t=Object.keys(t||{}).reduce(function(e,n){const r=t[n],{isExpired:i}=r,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(r,o);return c(c({},e),{},{[n]:c(c({},u),u.closed?{}:{closed:i?{reason:"cancel",timestamp:(new Date).getTime()}:null})})},{}),t||{}},a=function(e){let t=e.id.replace("ct-popup-","");const n=u()[t];if(e.dataset.popupRelaunch){if("always"===e.dataset.popupRelaunch)return!1;if(e.dataset.popupRelaunch.indexOf("custom")>-1&&n){const t=e.dataset.popupRelaunch.split(":");let r=0,o=0;t.length>1&&(r=parseInt(t[1]),o=r),t.length>2&&(o=parseInt(t[2]));const{closed:i}=n;if(!i||!i.timestamp)return!1;const c=("cancel"===i.reason?r:o)/60/24;return!((new Date-new Date(i.timestamp))/864e5>c)}}return n&&n.closed}},608:function(e,t,n){n.d(t,{handleTriggers:function(){return a}});var r=n(705),o=n(407);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=function(...e){n.e(460).then(n.bind(n,460)).then(function({openMicroPopup:t}){return t(...e)})},a=function(){if([...document.querySelectorAll('[data-popup-mode*="page_load"]')].filter(function(e){return!(0,o.O)(e)}).map(function(e){return u(e)}),[...document.querySelectorAll('[data-popup-mode*="after_x_time"]')].filter(function(e){return!(0,o.O)(e)}).map(function(e){let t=e.dataset.popupMode.split(":")[1];setTimeout(function(){u(e)},1e3*parseInt(t,10))}),document.querySelector('[data-popup-mode*="after_x_pages"]')){let e=[...document.querySelectorAll('[data-popup-mode*="after_x_pages"]')].filter(function(e){return!(0,o.O)(e)});if(e.length>0){let t=(0,o.u)();e.map(function(e){var n,r;const o=e.id.replace("ct-popup-",""),i=parseFloat(e.dataset.popupMode.split(":")[1])+1,a=c(c({},null!==(n=t[o])&&void 0!==n?n:{}),{},{pages:Array.from(new Set([...(null!==(r=t[o])&&void 0!==r?r:{}).pages||[],location.href]))});t[o]=a,a.pages.length>=i&&u(e)}),localStorage.setItem("blocksyPastPopups",JSON.stringify(t))}}if(document.querySelector('[data-popup-mode*="exit_intent"]')){if([...document.querySelectorAll('[data-popup-mode*="exit_intent"]')].filter(function(e){return!(0,o.O)(e)}).length>0){const e=function(t){(t.clientY<=0||t.clientX<=0||t.clientX>=window.innerWidth||t.clientY>=window.innerHeight)&&[...document.querySelectorAll('[data-popup-mode*="exit_intent"]')].map(function(t){t.classList.contains("active")||(u(t),document.removeEventListener("mouseout",e))})};document.addEventListener("mouseout",e)}}document.querySelector('[data-popup-mode*="element_reveal"]')&&[...document.querySelectorAll('[data-popup-mode*="element_reveal"]')].filter(function(e){return!(0,o.O)(e)}).map(function(e){let t=e.dataset.popupMode.split(":")[1];if(!document.querySelector(t))return;let n=new IntersectionObserver(function(t){0!==t.filter(function({isIntersecting:e}){return e}).map(function({target:e}){return e}).length&&(u(e),n.disconnect())});[...document.querySelectorAll(t)].map(function(e){n.observe(e)})}),document.querySelector('[data-popup-mode*="element_click"]')&&[...document.querySelectorAll('[data-popup-mode*="element_click"]')].filter(function(e){return!(0,o.O)(e)}).map(function(e){let t=e.dataset.popupMode.split(":")[1];document.querySelector(t)&&[...document.querySelectorAll(t)].map(function(t){t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),u(e)})})}),document.querySelector('[data-popup-mode*="after_inactivity"]')&&[...document.querySelectorAll('[data-popup-mode*="after_inactivity"]')].filter(function(e){return!(0,o.O)(e)}).map(function(e){var t;function n(){u(e),t&&clearTimeout(t),window.removeEventListener("load",r),window.removeEventListener("mousemove",r),window.removeEventListener("mousedown",r),window.removeEventListener("touchstart",r),window.removeEventListener("click",r),window.removeEventListener("keydown",r),window.removeEventListener("scroll",r,!0)}function r(){let r=e.dataset.popupMode.split(":")[1];clearTimeout(t),t=setTimeout(n,1e3*parseInt(r,10))}window.addEventListener("load",r),window.addEventListener("mousemove",r),window.addEventListener("mousedown",r),window.addEventListener("touchstart",r),window.addEventListener("click",r),window.addEventListener("keydown",r),window.addEventListener("scroll",r,!0)})}},705:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:function(){return i}})}}]);