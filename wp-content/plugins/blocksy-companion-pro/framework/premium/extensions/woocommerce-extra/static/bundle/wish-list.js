!function(){"use strict";var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function i(t){var i=function(t,i){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,i||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==e(i)?i:i+""}function n(t,e,n){return(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,{a:i}),i},t.d=function(e,i){for(var n in i)t.o(i,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var r=window.ctEvents,o=t.n(r),c=window.ctFrontend;const s=function(t){if(t.dataset.product_id)return parseInt(t.dataset.product_id);const e=t.closest(".product");if(!e)return null;const i=Array.from(e.classList).find(function(t){return 0===t.indexOf("post-")}).split("-")[1];return parseInt(i)},a=function(t,e,i){if(!t)return[...ct_localizations.blc_ext_wish_list.list.items];const n={};t.querySelectorAll("select[data-attribute_name]").forEach(function(t){const e=t.dataset.attribute_name.replace("attribute_","");n[e]=t.value});const r={id:e};if("add"===i)return Object.keys(n).length&&(r.attributes=n),[...ct_localizations.blc_ext_wish_list.list.items,r];if("remove"===i){return ct_localizations.blc_ext_wish_list.list.items.filter(function(t){return t.id!==r.id||Object.keys((null==t?void 0:t.attributes)||{}).some(function(e){var i;return(null==r||null===(i=r.attributes)||void 0===i?void 0:i[e])&&t.attributes[e]&&t.attributes[e]!==(null==r?void 0:r.attributes[e])})})}},l=function(t,e){const i={id:parseFloat(t)};if("add"===e)return[...ct_localizations.blc_ext_wish_list.list.items,i];if("remove"===e){return ct_localizations.blc_ext_wish_list.list.items.filter(function(t){return t.id!==i.id})}};function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}const f=['[class*="ct-wishlist-button"]',".ct-wishlist-remove",".wishlist-product-remove > .remove",'.product-mobile-actions > [href*="wishlist-remove"]'].join(", "),b=function(t){const e={};return t.querySelectorAll("select[data-attribute_name]").forEach(function(t){const i=t.dataset.attribute_name.replace("attribute_","");e[i]=t.value}),e},_=function(t,e,i={}){return t.items.some(function(t){if(t.id!==e)return!1;const n=(null==t?void 0:t.attributes)||{};return Object.keys(i).every(function(t){return n[t]&&i[t]&&n[t]===i[t]})})},m=function(t,e,i){_(e,i)&&(t.dataset.buttonState="active")},p=function(t,e){t.dataset.buttonState="";const i=t.closest(".product"),n=void 0!==t.dataset.variable,r=s(t);n?function(t,e,i,n){const r=i.querySelector(".add_to_cart_button"),o=i.querySelector("[data-current-variation]");if(null!==r||o){if(o){const n=parseFloat(o.dataset.currentVariation),r=b(i);_(e,n,r)&&(t.dataset.buttonState="active")}if(r&&r.getAttribute("href").includes("variation_id")){const n=new URLSearchParams(r.getAttribute("href")),o=parseFloat(n.get("variation_id")),c=b(i);_(e,o,c)&&(t.dataset.buttonState="active")}}else m(t,e,n)}(t,e,i,r):m(t,e,r)},y=function(t){document.querySelectorAll(f).forEach(function(e){p(e,t)})};ctEvents.on("blocksy:wishlist:sync",function(){return y(window.ct_localizations.blc_ext_wish_list.list)});var v=y;function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)}return i}function w(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}let g=!1;const O=function(){let t=Object.values(ct_localizations.blc_ext_wish_list.list.items);Array.from(document.querySelectorAll('.ct-header-wishlist, [data-id="wishlist"], [data-shortcut="wishlist"]')).map(function(e){const i=e.querySelector(".ct-dynamic-count-wishlist");i&&t.length!==+i.dataset.count&&(e.classList.remove("ct-added"),e.classList.add("ct-adding"),e.removeAttribute("style"),[...document.querySelectorAll(".ct-dynamic-count-wishlist")].map(function(e){e.innerHTML!==t.length&&(e.innerHTML=t.length,e.dataset.count=t.length)}),setTimeout(function(){e.classList.remove("ct-adding"),e.classList.add("ct-added")}))})},S=function({operation:t,productId:e,variable:i=!1,el:n,cb:r=function(){}}={}){let c=Object.values(ct_localizations.blc_ext_wish_list.list.items);if(t){let u=e||s(n);n&&(n.classList.contains("ct-wishlist-button-single")&&(c=function(t,e,i){const n=t.closest(".entry-summary");let r=[];if(n.querySelector('[name="variation_id"]')&&n.querySelector('[name="variation_id"]').value&&parseFloat(n.querySelector('[name="variation_id"]').value)&&i){const t=parseFloat(n.querySelector('[name="variation_id"]').value);r=a(n,t,e)}else r=l(s(t),e);return r}(n,t,i)),n.classList.contains("ct-wishlist-button-archive")&&!n.closest(".ct-compare-column")&&(c=function(t,e,i){const n=t.closest(".product");let r=[];if(n.querySelector(".add_to_cart_button")&&n.querySelector(".add_to_cart_button").getAttribute("href").includes("variation_id")&&i){const t=new URLSearchParams(n.querySelector(".add_to_cart_button").getAttribute("href")),i=parseFloat(t.get("variation_id"));r=a(n,i,e)}else r=l(s(t),e);return r}(n,t,i)),n.closest(".ct-compare-column")&&(c=l(u,t)),"remove"===t&&(n.closest(".wishlist-product-remove")||n.closest(".product-mobile-actions"))&&(c=function(t){var e,i;const n=t.closest("tr"),r=n.querySelectorAll("[data-attribute-slug]"),o={id:s(t)},c="yes"===(null===(e=n.querySelector(".variation"))||void 0===e||null===(i=e.dataset)||void 0===i?void 0:i.default);return Array.from(r).length&&!c&&Array.from(r).forEach(function(t){o.attributes=d(d({},o.attributes),{},{[t.dataset.attributeSlug]:t.dataset.attributeVal})}),ct_localizations.blc_ext_wish_list.list.items.filter(function(t){return t.id!==o.id||Object.keys((null==t?void 0:t.attributes)||{}).some(function(e){var i;return(null==o||null===(i=o.attributes)||void 0===i?void 0:i[e])&&t.attributes[e]&&t.attributes[e]!==(null==o?void 0:o.attributes[e])})})}(n))),"yes"===window.ct_localizations.blc_ext_wish_list.user_logged_in?fetch(`${ct_localizations.ajax_url}?action=blc_ext_wish_list_sync_likes`,{method:"POST",body:JSON.stringify(w(w({},ct_localizations.blc_ext_wish_list.list),{},{items:c})),headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function({success:e,data:i}){e&&r(t)}):(!function(t,e,i=365){var n;if(i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3),n="; expires="+r.toGMTString()}else n="";document.cookie=t+"="+e+n+"; path=/"}("blc_products_wish_list",JSON.stringify(w(w({},ct_localizations.blc_ext_wish_list.list),{},{items:c}))),setTimeout(function(){r(t)})),window.ct_localizations.blc_ext_wish_list.list.items=c,o().trigger("blocksy:woocommerce:wish-list-change",{operation:t,productId:u})}O()};(0,c.registerDynamicChunk)("blocksy_ext_woo_extra_wish_list",{mount:function(t,e={}){const{event:i,completeAction:n,initialState:r}=e||{};i?(i.preventDefault(),i.stopPropagation(),S({productId:s(t),el:t,operation:"active"===r||t.classList.contains("remove")?"remove":"add",variable:void 0!==t.dataset.variable,cb:function(e){o().trigger("blocksy:wishlist:sync"),n("add"===e?{finalState:"active"}:{finalState:""}),t.closest(".ct-woocommerce-wishlist-table")&&(1===t.closest("tbody").children.length?location.reload():t.closest("tr").remove())}})):g||(g=!0,fetch(`${ct_localizations.ajax_url}?action=blc_ext_wish_list_get_all_likes`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function({success:t,data:e}){window.ct_localizations.blc_ext_wish_list={list:e.likes,user_logged_in:e.user_logged_in},O(),v(e.likes)}))}})}();